--- src/Modules/posixmodule.c.orig	2025-10-07 05:34:52.000000000 -0400
+++ src/Modules/posixmodule.c	2025-10-18 05:40:23.335988442 -0400
@@ -114,7 +114,7 @@
 #  include <sys/sendfile.h>       // sendfile()
 #endif
 
-#if defined(__APPLE__)
+#if defined(__APPLE__) && __has_include(<copyfile.h>)
 #  include <copyfile.h>           // fcopyfile()
 #endif
 
@@ -12044,7 +12044,7 @@
 #endif /* HAVE_SENDFILE */
 
 
-#if defined(__APPLE__)
+#if defined(__APPLE__) && __has_include(<copyfile.h>)
 /*[clinic input]
 os._fcopyfile
 
--- src/Modules/clinic/posixmodule.c.h.orig
+++ src/Modules/clinic/posixmodule.c.h
@@ -8284,7 +8284,7 @@
 
 #endif /* defined(HAVE_SENDFILE) && !defined(__APPLE__) && !(defined(__FreeBSD__) || defined(__DragonFly__)) */
 
-#if defined(__APPLE__)
+#if defined(__APPLE__) && __has_include(<copyfile.h>)
 
 PyDoc_STRVAR(os__fcopyfile__doc__,
 "_fcopyfile($module, in_fd, out_fd, flags, /)\n"
