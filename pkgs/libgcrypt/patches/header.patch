--- src/random/rndoldlinux.c.orig
+++ src/random/rndoldlinux.c
@@ -29,7 +29,9 @@
 #include <fcntl.h>
 #include <poll.h>
 #if defined(__APPLE__) && defined(__MACH__)
+#if __has_include(<Availability.h>)
 #include <Availability.h>
+#endif
 #ifdef __MAC_10_11
 #include <TargetConditionals.h>
 #if !defined(TARGET_OS_IPHONE) || TARGET_OS_IPHONE == 0
